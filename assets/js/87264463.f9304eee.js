/*! For license information please see 87264463.f9304eee.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[98981],{62525:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,a){for(var i,s,c=o(e),p=1;p<arguments.length;p++){for(var l in i=Object(arguments[p]))n.call(i,l)&&(c[l]=i[l]);if(t){s=t(i);for(var u=0;u<s.length;u++)r.call(i,s[u])&&(c[s[u]]=i[s[u]])}}return c}},41535:(e,t,n)=>{var r=n(62525),o=60103,a=60106;var i=60109,s=60110,c=60112;var p=60115,l=60116;if("function"==typeof Symbol&&Symbol.for){var u=Symbol.for;o=u("react.element"),a=u("react.portal"),u("react.fragment"),u("react.strict_mode"),u("react.profiler"),i=u("react.provider"),s=u("react.context"),c=u("react.forward_ref"),u("react.suspense"),p=u("react.memo"),l=u("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h={};function y(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||f}function m(){}function k(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var g=k.prototype=new m;g.constructor=k,r(g,y.prototype),g.isPureReactComponent=!0;var b=Array.isArray,v=Object.prototype.hasOwnProperty,w={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var r,a={},i=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)v.call(t,r)&&!E.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){for(var p=Array(c),l=0;l<c;l++)p[l]=arguments[l+2];a.children=p}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===a[r]&&(a[r]=c[r]);return{$$typeof:o,type:e,key:i,ref:s,props:a,_owner:w.current}}function j(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var x=/\/+/g;function F(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case o:case a:c=!0}}if(c)return i=i(c=e),e=""===r?"."+F(c,0):r,b(i)?(n="",null!=e&&(n=e.replace(x,"$&/")+"/"),S(i,t,n,"",(function(e){return e}))):null!=i&&(j(i)&&(i=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(x,"$&/")+"/")+e)),t.push(i)),1;if(c=0,r=""===r?".":r+":",b(e))for(var p=0;p<e.length;p++){var l=r+F(s=e[p],p);c+=S(s,t,n,l,i)}else if("function"==typeof(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),p=0;!(s=e.next()).done;)c+=S(s=s.value,t,n,l=r+F(s,p++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function N(e,t,n){if(null==e)return e;var r=[],o=0;return S(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},R={transition:0}},27378:(e,t,n)=>{n(41535)},3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>f});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),p=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=p(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=p(n),f=o,h=d["".concat(c,".").concat(f)]||d[f]||u[f]||a;return n?r.createElement(h,i(i({ref:t},l),{},{components:n})):r.createElement(h,i({ref:t},l))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},41898:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>a,contentTitle:()=>i,metadata:()=>s,toc:()=>c,default:()=>l});var r=n(87462),o=(n(27378),n(3905));const a={title:"TypeScript Types"},i=void 0,s={unversionedId:"api/types",id:"api/types",title:"TypeScript Types",description:"@rest-hooks/core",source:"@site/../docs/api/types.md",sourceDirName:"api",slug:"/api/types",permalink:"/docs/next/api/types",editUrl:"https://github.com/coinbase/rest-hooks/edit/master/docs/api/types.md",tags:[],version:"current",lastUpdatedBy:"Nathaniel Tucker",lastUpdatedAt:1633535713,formattedLastUpdatedAt:"10/6/2021",frontMatter:{title:"TypeScript Types"},sidebar:"docs",previous:{title:"Legacy browser support",permalink:"/docs/next/guides/legacy-browser"},next:{title:"Controller",permalink:"/docs/next/api/Controller"}},c=[{value:"@rest-hooks/core",id:"rest-hookscore",children:[{value:"Manager",id:"manager",children:[],level:3},{value:"NetworkError",id:"networkerror",children:[],level:3},{value:"UnknownError",id:"unknownerror",children:[],level:3}],level:2},{value:"@rest-hooks/endpoint",id:"rest-hooksendpoint",children:[{value:"EndpointInterface",id:"endpointinterface",children:[],level:3},{value:"EndpointInstance",id:"endpointinstance",children:[],level:3},{value:"FetchFunction",id:"fetchfunction",children:[],level:3}],level:2},{value:"@rest-hooks/rest",id:"rest-hooksrest",children:[{value:"RestEndpoint",id:"restendpoint",children:[],level:3},{value:"RestFetch",id:"restfetch",children:[],level:3}],level:2}],p={toc:c};function l(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"rest-hookscore"},"@rest-hooks/core"),(0,o.kt)("h3",{id:"manager"},"Manager"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"interface Manager {\n  getMiddleware(): Middleware;\n  cleanup(): void;\n  init?: (state: State<any>) => void;\n}\n")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"./Manager"},"More")),(0,o.kt)("h3",{id:"networkerror"},"NetworkError"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"interface NetworkError extends Error {\n  status: number;\n  response?: Response;\n}\n")),(0,o.kt)("h3",{id:"unknownerror"},"UnknownError"),(0,o.kt)("p",null,"This is a catch-all for errors thrown in fetch functions. It is recommended\nto try to conform to the ",(0,o.kt)("inlineCode",{parentName:"p"},"NetworkError")," interface above"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"type UnknownError = Error & { status?: unknown; response?: unknown };\n")),(0,o.kt)("h2",{id:"rest-hooksendpoint"},"@rest-hooks/endpoint"),(0,o.kt)("h3",{id:"endpointinterface"},"EndpointInterface"),(0,o.kt)("p",null,"The bare requirements for an endpoint-type. This is useful\nfor typing function parameters (like hooks), as it is accepting of any correct\nimplementation."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"export interface EndpointInterface<\n  F extends FetchFunction = FetchFunction,\n  S extends Schema | undefined = Schema | undefined,\n  M extends true | undefined = true | undefined\n> extends EndpointExtraOptions {\n  (...args: Parameters<F>): InferReturn<F, S>;\n  key(...args: Parameters<F>): string;\n  readonly sideEffect?: M;\n  readonly schema?: S;\n}\n")),(0,o.kt)("p",null,"e.g.,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"function useCache<E extends EndpointInterface>(\n  endpoint: E,\n  params: Parameters<E>[0],\n);\n")),(0,o.kt)("h3",{id:"endpointinstance"},"EndpointInstance"),(0,o.kt)("p",null,"An instance of the ",(0,o.kt)("a",{parentName:"p",href:"./Endpoint"},"Endpoint")," class."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"interface EndpointInstance<\n  F extends FetchFunction = FetchFunction,\n  S extends Schema | undefined = Schema | undefined,\n  M extends true | undefined = true | undefined\n>;\n")),(0,o.kt)("p",null,"This is useful to specify types explicitly, instead of implicitly in construction.\nBeing explicit reduces TypeScript computational overhead when inferring types, which\nis sometimes necessary to avoid tripping the recursion depth limit. This is one of the reasons why\nthere is an ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/eslint-plugin/docs/rules/explicit-function-return-type.md"},"eslint rule to explicitly specify return types of methods/functions"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"const userDetail: EndpointInstance<FetchFunction<{\n  id: string;\n}>> = new Endpoint(({ id }) => fetch(`/users/${id}`));\n\nclass User extends Entity {\n  static detail<T extends User>(\n    this: T,\n  ): EndpointInstance<\n    FetchFunction<{\n      id: string;\n    }>,\n    T,\n    undefined\n  > {\n    return new Endpoint(({ id }) => fetch(`/users/${id}`), { schema: this });\n  }\n\n  /** Expected Body payload is a subset of the properties of User\n  *  Expected Response is all the properties of User\n  */\n  static update<T extends User>(\n    this: T,\n  ): EndpointInstance<\n    FetchFunction<\n      {\n        id: string;\n      },\n      Partial<T>,\n      // return value is plain object - this is an easy way to extract public members from this class' interface\n      Omit<T, never>\n    >,\n    T,\n    true\n  > {\n    return new Endpoint(({ id }) => fetch(`/users/${id}`, { method: 'PUT' }), {\n      schema: this,\n    });\n  }\n}\n")),(0,o.kt)("h3",{id:"fetchfunction"},"FetchFunction"),(0,o.kt)("p",null,"Represents a function that does actual fetch. Convenient type to specify\nonly part of the function's type."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"export type FetchFunction<P = any, B = any, R = any> = (\n  params?: P,\n  body?: B,\n) => Promise<R>;\n")),(0,o.kt)("p",null,"Providing a function type that returns a Promise also works."),(0,o.kt)("h2",{id:"rest-hooksrest"},"@rest-hooks/rest"),(0,o.kt)("h3",{id:"restendpoint"},"RestEndpoint"),(0,o.kt)("p",null,"Is a specialized form of Endpoint that includes additional extension points\nfor easy customization."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"export interface RestEndpoint<\n  F extends FetchFunction = RestFetch,\n  S extends Schema | undefined = Schema | undefined,\n  M extends true | undefined = true | undefined\n> extends EndpointInstance<F, S, M> {\n  url: (urlParams: Readonly<Record<string, any>>) => string;\n  fetchInit: RequestInit;\n  useFetchInit: (this: any) => any;\n  getFetchInit: (\n    this: any,\n    body?: RequestInit['body'] | Record<string, any>,\n  ) => any;\n  method: string;\n  signal: AbortSignal | undefined;\n}\n")),(0,o.kt)("h3",{id:"restfetch"},"RestFetch"),(0,o.kt)("p",null,"Fetch function for Resources. Unlike ",(0,o.kt)("a",{parentName:"p",href:"#fetchfunction"},"FetchFunction"),", these require the params variable\nas ",(0,o.kt)("a",{parentName:"p",href:"./resource"},"Resource")," expects it"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"export type RestFetch<\n  P = any,\n  B = RequestInit['body'] | Record<string, any>,\n  R = any\n> = (this: RestEndpoint, params: P, body?: B) => Promise<R>;\n")))}l.isMDXComponent=!0}}]);